{% extends 'base/base.html' %}
{% block style %}
    <style>
        .clickable-row {
            cursor: pointer;
        }

        .table {
            padding: 1% 0;
        }
          
        .nav-link {
            color: gray;
        }

        .nav-link:hover {
            color: lightgrey;
        }

        .page-item.active .page-link {
            background-color: rgb(228, 224, 224) !important;
            border: 1px solid rgb(228, 224, 224) ;
        }
        .page-link {
            color: black !important;
        }
        
    </style>
{% endblock style %}
{% block body %}
<div class="container content">
    <div class="row" style="margin-bottom: 10px">
            <h4 class="title-dark">è¨ˆç•«ç¸½è¦½</h4>
    </div>
    <div class="row">
        <div class="col-2">
            <div class="row">
                <h6>ç¯©é¸æ¢ä»¶</h6>
                <p class="my-1">ç‰©ç¨®</p>
                <ul style="list-style: none">
                <li>
                    <label class="form-check-label">
                        <input class="filter" type="checkbox" checked onClick="toggle(this)">
                            å…¨é¸
                    </label>
                </li>
                    {% for i in species_data %}
                    <li>
                        <label class="form-check-label">
                        <input class="filter" checked type="checkbox" name="species-filter" value="{{ i.1 }}">
                            {{ i.1 }} ({{i.0}})
                        </label>
                    </li>
                    {% endfor %}
                </ul>

            </div>
        </div>
        <div class="col-10">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="myproject-tab" data-bs-toggle="tab" data-bs-target="#myproject" type="button" role="tab" aria-controls="myproject" aria-selected="true">æˆ‘çš„è¨ˆç•«</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="allproject-tab" data-bs-toggle="tab" data-bs-target="#allproject" type="button" role="tab" aria-controls="allproject" aria-selected="false">æ‰€æœ‰è¨ˆç•«</button>
                </li>
                <li class="nav-item ms-auto">
                    <a class="btn btn-orange" href="{% url 'create_project' %}">æ–°å¢è¨ˆç•«</a>
                </li>
              </ul>
              <div class="tab-content" id="myTabContent" style="background-color: white; padding: 2%">
                <div class="tab-pane fade show active" id="myproject" role="tabpanel" aria-labelledby="myproject-tab">
                    <table class="table table-hover bg-white" id="myproject-table" style="width: 100%;">
                        <thead>
                        <tr>
                            <td style="width: 35%">è¨ˆç•«åç¨±</td>
                            <td style="width: 15%">è³‡æ–™èµ·å§‹å¹´ä»½</td>
                            <td style="width: 20%">å§”è¨—å–®ä½</td>
                            <td style="width: 10%">æ¨£å€æ•¸é‡</td>
                            <td style="width: 10%">ç›¸æ©Ÿä½ç½®æ•¸</td>
                            <td style="width: 10%">è³‡æ–™é‡</td>
                        </tr>
                        </thead>
                        <tbody>
                        {% for tuples in row %}
                            <tr class='clickable-row' data-href="{% url 'project_detail' tuples.0 %}">
                                {% for t in tuples %}
                                    {% if not forloop.first %}
                                        <td>{{ t }}</td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="allproject" role="tabpanel" aria-labelledby="allproject-tab">
                    <table class="table table-hover bg-white" id="allproject-table" style="width: 100%;">
                        <thead>
                        <tr>
                            <td style="width: 35%">è¨ˆç•«åç¨±</td>
                            <td style="width: 15%">è³‡æ–™èµ·å§‹å¹´ä»½</td>
                            <td style="width: 20%">å§”è¨—å–®ä½</td>
                            <td style="width: 10%">æ¨£å€æ•¸é‡</td>
                            <td style="width: 10%">ç›¸æ©Ÿä½ç½®æ•¸</td>
                            <td style="width: 10%">è³‡æ–™é‡</td>
                        </tr>
                        </thead>
                        <tbody>
                        <!-- {% for tuples in row %}
                            <tr class='clickable-row' data-href="{% url 'project_detail' tuples.0 %}">
                                {% for t in tuples %}
                                    {% if not forloop.first %}
                                        <td>{{ t }}</td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %} -->
                        </tbody>
                    </table>
                </div>
              </div>
        </div>
    </div>
    </div>
{% endblock body %} {% block script %}
    <script>
        // Shorthand for $( document ).ready()
        $(function () {
            $(".clickable-row").click(function () {
                //console.log($(this).data("href"));
                window.location = $(this).data("href");
            });


            $(".filter").click(function(){
                check_list = $("[name=species-filter]:checked");
                let speciesArray = [];
                check_list.each(function(){
                    speciesArray.push($(this).val()); 
                });
                // ajax here
                
            })
        });

            // select all species
        function toggle(source) {
            checkboxes = document.getElementsByName('species-filter');
            for(var i=0, n=checkboxes.length;i<n;i++) {
                checkboxes[i].checked = source.checked;
            }
            }

        // datatable
        let language_settings = {
            "decimal":        "",
            "emptyTable":     "æŸ¥ç„¡è³‡æ–™",
            "info":           "å…± _TOTAL_ ç­†",
            "infoEmpty":      "å…± 0 ç­†",
            "infoFiltered":   "",
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     "æ¯é é¡¯ç¤º _MENU_ ç­†",
            "loadingRecords": "è¼‰å…¥ä¸­...",
            "processing":     "è™•ç†ä¸­...",
            "search":         "æŸ¥è©¢ğŸ”",
            "zeroRecords":    "æŸ¥ç„¡ç¬¦åˆè³‡æ–™",
            "paginate": {
                "next":       "ä¸‹ä¸€é ",
                "previous":   "ä¸Šä¸€é "
            }
        };

        $('#myproject-table').DataTable({"language": language_settings});
        $('#allproject-table').DataTable({"language": language_settings});
    </script>
{% endblock script %}
